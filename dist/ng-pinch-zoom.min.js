/*! angular-pinch-zoom - v0.2.1 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function n(n,t,e){function i(n){var t=n.originalEvent?n.originalEvent.touches:n.touches;I=t[0].clientX,k=t[0].clientY,Y=w,d=X,z=0,F=0}function o(n){var e=n.originalEvent?n.originalEvent.touches:n.touches;if(""===u&&(1===e.length&&g>1?u="swipe":2===e.length&&(u="pinch",m=g,h=c(e),E=e[0].clientX-parseInt((e[0].clientX-e[1].clientX)/2,10)-t[0].offsetLeft-Y,b=e[0].clientY-parseInt((e[0].clientY-e[1].clientY)/2,10)-t[0].offsetTop-d)),"swipe"===u)n.preventDefault(),z=e[0].clientX-I,F=e[0].clientY-k,w=Y+z,X=d+F,a();else if("pinch"===u){if(2!==e.length)return;n.preventDefault(),f=c(e),v=f/h,g=v*m,w=E*(1-v)+Y+z,X=b*(1-v)+d+F,a()}}function r(n){var t=n.originalEvent?n.originalEvent.touches:n.touches;""===u||t.length>0||(g<1?(g=1,w=0,X=0):g>p?(g=p,v=g/m,w=E*(1-v)+Y+z,X=b*(1-v)+d+F):(w>0?w=0:w<l*(1-g)&&(w=l*(1-g)),X>0?X=0:X<s*(1-g)&&(X=s*(1-g))),a(.1),u="")}function c(n){var t=Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2));return parseInt(t,10)}function a(e){var i=e?"all cubic-bezier(0,0,.5,1) "+e+"s":"",o=[g,0,0,g,w,X],r="matrix("+o.join(",")+")";t.css({"-webkit-transition":i,transition:i,"-webkit-transform":r+" translate3d(0,0,0)",transform:r}),n.zoomFn&&n.zoomFn(g)}var l,s,u="",f=0,h=0,g=1,v=1,m=1,p=parseInt(e.maxScale,10);(isNaN(p)||p<=1)&&(p=3);var w=0,X=0,Y=0,d=0,E=0,b=0,I=0,k=0,z=0,F=0,M=new Image;M.onload=function(){l=t[0].clientWidth,s=t[0].clientHeight,t.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),t.on("touchstart",i),t.on("touchmove",o),t.on("touchend",r)},e.ngSrc?M.src=e.ngSrc:M.src=e.src}var t={restrict:"A",scope:{zoomFn:"="},link:n};return t});